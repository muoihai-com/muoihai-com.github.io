{"pageProps":{"slug":"escape-html-trong-javascript","title":"Escape HTML trong javascript","date":"Wed Mar 09 2022 21:08:26 GMT+0700 (Indochina Time)","description":"Escape HTML trong javascript, html là hành động ta thay thế một số ký tự đặc biệt với HTML character và phòng tránh XSS attack","tags":["Javascript"],"content":"<h1>Escape HTML trong javascript</h1>\n<p>Escape string trong javascript, html là hành động ta thay thế một số ký tự đặc biệt với HTML character và phòng tránh XSS attack.</p>\n<p>Các ký tự cần escape là <strong>\"&#x26;\", \"&#x3C;\", \">\", '\"', và \"'\"</strong></p>\n<p>Cùng xem chuỗi dưới đây, nếu không được escape và in ra trực tiếp bạn sẽ nhìn thấy một alert thay vì đọc được đoạn code này.</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">script</span>></span> alert(123) <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">script</span>></span>\n</code></pre>\n<p>Chúng ta có thể escape HTML bằng cách dùng hàm <code>replaceAll</code> của String.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title hljs-function\">escape</span>(<span class=\"hljs-params\">string</span>) {\n  <span class=\"hljs-keyword\">return</span> string.<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">'&#x26;'</span>, <span class=\"hljs-string\">'&#x26;amp;'</span>)\n    .<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">'&#x3C;'</span>, <span class=\"hljs-string\">'&#x26;lt;'</span>)\n    .<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">'>'</span>, <span class=\"hljs-string\">'&#x26;gt;'</span>)\n    .<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">'\"'</span>, <span class=\"hljs-string\">'&#x26;quot;'</span>)\n    .<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">\"'\"</span>, <span class=\"hljs-string\">'&#x26;#39;'</span>)\n}\n\n<span class=\"hljs-built_in\">escape</span>(<span class=\"hljs-string\">'&#x3C;script> alert(123) &#x3C;/script>'</span>) <span class=\"hljs-comment\">// '&#x26;lt;script&#x26;gt; alert(123) &#x26;lt;/script&#x26;gt;'</span>\n</code></pre>\n<h2>Unescape</h2>\n<p>Unescape HTML là quá trình ngược lại với việc escape.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title hljs-function\">unescape</span>(<span class=\"hljs-params\">string</span>) {\n  <span class=\"hljs-keyword\">return</span> string.<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">'&#x26;amp;'</span>, <span class=\"hljs-string\">'&#x26;'</span>)\n    .<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">'&#x26;lt;'</span>, <span class=\"hljs-string\">'&#x3C;'</span>)\n    .<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">'&#x26;gt;'</span>, <span class=\"hljs-string\">'>'</span>)\n    .<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">'&#x26;quot;'</span>, <span class=\"hljs-string\">'\"'</span>)\n    .<span class=\"hljs-title hljs-function\">replaceAll</span>(<span class=\"hljs-string\">'&#x26;#39;'</span>, <span class=\"hljs-string\">\"'\"</span>)\n}\n\n<span class=\"hljs-built_in\">unescape</span>(<span class=\"hljs-string\">'&#x26;lt;script&#x26;gt; alert(123) &#x26;lt;/script&#x26;gt;'</span>)\n</code></pre>"},"__N_SSG":true}