<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Rails | Một số hàm được thêm vào Object | Hungkieu&#x27;s blog</title><meta name="description" content="Đối với Rails thì khi bạn coding, đã có thêm một số hàm được thêm vào Object, là class mà tất cả các Object khác đều được kế thừa, bài viết này sẽ giới thiệu một số hàm này"/><meta name="next-head-count" content="4"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/f7f9582a9cf39135.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f7f9582a9cf39135.css" data-n-g=""/><link rel="preload" href="/_next/static/css/2102fb57c040c35d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2102fb57c040c35d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-a054bbf31fb90f6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2fa1a84ec5e1b202.js" defer=""></script><script src="/_next/static/chunks/629-d50099c034da5e99.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-00328814ffa3b55b.js" defer=""></script><script src="/_next/static/kfF1GxF1dBDSIy8Lqvc13/_buildManifest.js" defer=""></script><script src="/_next/static/kfF1GxF1dBDSIy8Lqvc13/_ssgManifest.js" defer=""></script><script src="/_next/static/kfF1GxF1dBDSIy8Lqvc13/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Bitter:wght@500&display=swap">@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfCLw.woff) format('woff')}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLXOW3pzveS5B3Nd.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLzOW3pzveS5B3Nd.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLfOW3pzveS5B3Nd.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLbOW3pzveS5B3Nd.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLjOW3pzveS5Bw.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next" data-reactroot=""><div class="styles_layout__uw121"><main class="styles_main__ZTqbU"><div class="styles_article__gKJAH"><article><a href="/">← Quay về trang chủ</a><div class="styles_htmlBody__Y9rnw"><h1>Một số hàm được thêm vào Object trong Rails</h1>
<p>phiên bản được sử dụng trong bài viết là <strong>Rails 7.0.2.3</strong>, <a href="https://api.rubyonrails.org/classes/Object.html">Thông tin mình lấy từ trang api của rails</a></p>
<p>Với việc mọi Object trong Ruby đều kế thừa từ Class Object, thì khi Rails thêm một số hàm vào class này, toàn bộ các object khác đều có thể sử dụng được, và đây cũng là các hàm hỗ trợ rất nhiều cho bạn trong quá trình code.</p>
<h2>.blank?(), .present?()</h2>
<p>Một object là balnk nếu nó false, empty, hoặc là một string rỗng. Bạn có thể xem source code.</p>
<pre><code class="hljs language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">blank?</span></span>
  respond_to?(<span class="hljs-symbol">:empty?</span>) ? !!empty? : !<span class="hljs-keyword">self</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Theo đó thì object nào empty hoặc là falsey value thì sẽ blank</p>
<pre><code class="hljs language-ruby"><span class="hljs-number">0</span>.blank? <span class="hljs-comment"># false</span>
[].blank? <span class="hljs-comment"># true</span>
<span class="hljs-string">''</span>.blank? <span class="hljs-comment"># true</span>
</code></pre>
<p>Hàm <code>.present?</code> thì đơn giản là ngược lại với <code>.blank?</code></p>
<pre><code class="hljs language-rb"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">present?</span></span>
  !blank?
<span class="hljs-keyword">end</span>
</code></pre>
<h2>.presence()</h2>
<p>Trả về bản thân object đang gọi nếu nó present (object.present? => true) còn không thì trả về nil. object.presence tương đương với</p>
<pre><code class="hljs language-rb">object.present? ? object : <span class="hljs-literal">nil</span>
</code></pre>
<p>Ví dụ mà presence có thể giúp bạn giảm bớt việc code</p>
<pre><code class="hljs language-rb">state   = params[<span class="hljs-symbol">:state</span>]   <span class="hljs-keyword">if</span> params[<span class="hljs-symbol">:state</span>].present?
country = params[<span class="hljs-symbol">:country</span>] <span class="hljs-keyword">if</span> params[<span class="hljs-symbol">:country</span>].present?
region  = state <span class="hljs-params">||</span> country <span class="hljs-params">||</span> <span class="hljs-string">'US'</span>

<span class="hljs-comment"># tương đương với</span>

region = params[<span class="hljs-symbol">:state</span>].presence <span class="hljs-params">||</span> params[<span class="hljs-symbol">:country</span>].presence <span class="hljs-params">||</span> <span class="hljs-string">'US'</span>
</code></pre>
<p>Mã nguồn của <code>.presence</code> là</p>
<pre><code class="hljs language-rb"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">presence</span></span>
  <span class="hljs-keyword">self</span> <span class="hljs-keyword">if</span> present?
<span class="hljs-keyword">end</span>
</code></pre>
<h2>.in?(another_object), .presence_in(another_object)</h2>
<p><code>.in?</code> trả về true nếu object hiện tại nằm trong argument. Argument phải là Array, String hoặc object nào có hàm <code>#include?</code>, nếu không nó sẽ trả về lỗi <code>ArgumentError</code>, cùng xem mã nguồn của hàm này để hiểu tại sao</p>
<pre><code class="hljs language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">in?</span><span class="hljs-params">(another_object)</span></span>
  another_object.<span class="hljs-keyword">include</span>?(<span class="hljs-keyword">self</span>)
<span class="hljs-keyword">rescue</span> NoMethodError
  raise ArgumentError.new(<span class="hljs-string">"The parameter passed to #in? must respond to #include?"</span>)
<span class="hljs-keyword">end</span>
</code></pre>
<p>Tiếp theo là sự kết hợp giữa <code>.presence</code> và <code>.in?</code> hàm <code>.presence_in</code> trả về object đang gọi nếu thỏa mãn <code>.in?</code> hoặc trả về nil.</p>
<pre><code class="hljs language-rb"><span class="hljs-number">1</span>.<span class="hljs-keyword">in</span>? [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>] <span class="hljs-comment"># true</span>
<span class="hljs-string">'banana'</span>.<span class="hljs-keyword">in</span>? <span class="hljs-string">'strawberry apple'</span> <span class="hljs-comment"># false</span>
<span class="hljs-number">1</span>.presence_in [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>] <span class="hljs-comment"># 1</span>
<span class="hljs-string">'banana'</span>.presence_in <span class="hljs-string">'strawberry apple'</span> <span class="hljs-comment"># nil</span>
</code></pre></div></article><footer class="styles_footer__UG76L">©<a class="styles_link__KytYE" href="https://github.com/hungkieu">hungkieu</a>2022</footer></div></main><a class="styles_top__yIBNd"><svg width="30" height="30" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="white" d="M572.235 205.282v600.365a30.118 30.118 0 11-60.235 0V205.282L292.382 438.633a28.913 28.913 0 01-42.646 0 33.43 33.43 0 010-45.236l271.058-288.045a28.913 28.913 0 0142.647 0L834.5 393.397a33.43 33.43 0 010 45.176 28.913 28.913 0 01-42.647 0l-219.618-233.23z"></path></svg></a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"mot-so-ham-duoc-them-vao-object-rails","title":"Rails | Một số hàm được thêm vào Object","date":"Sun Mar 13 2022 23:10:26 GMT+0700 (Indochina Time)","description":"Đối với Rails thì khi bạn coding, đã có thêm một số hàm được thêm vào Object, là class mà tất cả các Object khác đều được kế thừa, bài viết này sẽ giới thiệu một số hàm này","tags":["Rails"],"content":"\u003ch1\u003eMột số hàm được thêm vào Object trong Rails\u003c/h1\u003e\n\u003cp\u003ephiên bản được sử dụng trong bài viết là \u003cstrong\u003eRails 7.0.2.3\u003c/strong\u003e, \u003ca href=\"https://api.rubyonrails.org/classes/Object.html\"\u003eThông tin mình lấy từ trang api của rails\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eVới việc mọi Object trong Ruby đều kế thừa từ Class Object, thì khi Rails thêm một số hàm vào class này, toàn bộ các object khác đều có thể sử dụng được, và đây cũng là các hàm hỗ trợ rất nhiều cho bạn trong quá trình code.\u003c/p\u003e\n\u003ch2\u003e.blank?(), .present?()\u003c/h2\u003e\n\u003cp\u003eMột object là balnk nếu nó false, empty, hoặc là một string rỗng. Bạn có thể xem source code.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ruby\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eblank?\u003c/span\u003e\u003c/span\u003e\n  respond_to?(\u003cspan class=\"hljs-symbol\"\u003e:empty?\u003c/span\u003e) ? !!empty? : !\u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTheo đó thì object nào empty hoặc là falsey value thì sẽ blank\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ruby\"\u003e\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e.blank? \u003cspan class=\"hljs-comment\"\u003e# false\u003c/span\u003e\n[].blank? \u003cspan class=\"hljs-comment\"\u003e# true\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e.blank? \u003cspan class=\"hljs-comment\"\u003e# true\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHàm \u003ccode\u003e.present?\u003c/code\u003e thì đơn giản là ngược lại với \u003ccode\u003e.blank?\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-rb\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003epresent?\u003c/span\u003e\u003c/span\u003e\n  !blank?\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e.presence()\u003c/h2\u003e\n\u003cp\u003eTrả về bản thân object đang gọi nếu nó present (object.present? =\u003e true) còn không thì trả về nil. object.presence tương đương với\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-rb\"\u003eobject.present? ? object : \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eVí dụ mà presence có thể giúp bạn giảm bớt việc code\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-rb\"\u003estate   = params[\u003cspan class=\"hljs-symbol\"\u003e:state\u003c/span\u003e]   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e params[\u003cspan class=\"hljs-symbol\"\u003e:state\u003c/span\u003e].present?\ncountry = params[\u003cspan class=\"hljs-symbol\"\u003e:country\u003c/span\u003e] \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e params[\u003cspan class=\"hljs-symbol\"\u003e:country\u003c/span\u003e].present?\nregion  = state \u003cspan class=\"hljs-params\"\u003e||\u003c/span\u003e country \u003cspan class=\"hljs-params\"\u003e||\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'US'\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# tương đương với\u003c/span\u003e\n\nregion = params[\u003cspan class=\"hljs-symbol\"\u003e:state\u003c/span\u003e].presence \u003cspan class=\"hljs-params\"\u003e||\u003c/span\u003e params[\u003cspan class=\"hljs-symbol\"\u003e:country\u003c/span\u003e].presence \u003cspan class=\"hljs-params\"\u003e||\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'US'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eMã nguồn của \u003ccode\u003e.presence\u003c/code\u003e là\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-rb\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003epresence\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e present?\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e.in?(another_object), .presence_in(another_object)\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e.in?\u003c/code\u003e trả về true nếu object hiện tại nằm trong argument. Argument phải là Array, String hoặc object nào có hàm \u003ccode\u003e#include?\u003c/code\u003e, nếu không nó sẽ trả về lỗi \u003ccode\u003eArgumentError\u003c/code\u003e, cùng xem mã nguồn của hàm này để hiểu tại sao\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ruby\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ein?\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(another_object)\u003c/span\u003e\u003c/span\u003e\n  another_object.\u003cspan class=\"hljs-keyword\"\u003einclude\u003c/span\u003e?(\u003cspan class=\"hljs-keyword\"\u003eself\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003erescue\u003c/span\u003e NoMethodError\n  raise ArgumentError.new(\u003cspan class=\"hljs-string\"\u003e\"The parameter passed to #in? must respond to #include?\"\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTiếp theo là sự kết hợp giữa \u003ccode\u003e.presence\u003c/code\u003e và \u003ccode\u003e.in?\u003c/code\u003e hàm \u003ccode\u003e.presence_in\u003c/code\u003e trả về object đang gọi nếu thỏa mãn \u003ccode\u003e.in?\u003c/code\u003e hoặc trả về nil.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-rb\"\u003e\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e? [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e] \u003cspan class=\"hljs-comment\"\u003e# true\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e'banana'\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e? \u003cspan class=\"hljs-string\"\u003e'strawberry apple'\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# false\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e.presence_in [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e] \u003cspan class=\"hljs-comment\"\u003e# 1\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e'banana'\u003c/span\u003e.presence_in \u003cspan class=\"hljs-string\"\u003e'strawberry apple'\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# nil\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"mot-so-ham-duoc-them-vao-object-rails"},"buildId":"kfF1GxF1dBDSIy8Lqvc13","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>