<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Tìm hiểu về Jestjs, viết unit test cho javascript | Hungkieu&#x27;s blog</title><meta name="description" content="Jestjs là một JavaScript Testing Framework khá là dễ sử dụng và cài đặt, tuy nhiên vẫn đầy đủ tính năng để bạn có thể sử dụng. Bài viết này mình xin giới thiệu một số tính năng cơ bản của jest cùng với một số ví dụ."/><meta name="next-head-count" content="4"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/77b952c78de83359.css" as="style"/><link rel="stylesheet" href="/_next/static/css/77b952c78de83359.css" data-n-g=""/><link rel="preload" href="/_next/static/css/82aea1e56f971206.css" as="style"/><link rel="stylesheet" href="/_next/static/css/82aea1e56f971206.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-a054bbf31fb90f6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2fa1a84ec5e1b202.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-f5f0aa76264c2c7c.js" defer=""></script><script src="/_next/static/Ks3kXhdQTwMZQ3etT1ZT5/_buildManifest.js" defer=""></script><script src="/_next/static/Ks3kXhdQTwMZQ3etT1ZT5/_ssgManifest.js" defer=""></script><script src="/_next/static/Ks3kXhdQTwMZQ3etT1ZT5/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Bitter:wght@500&display=swap">@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfCLw.woff) format('woff')}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLXOW3pzveS5B3Nd.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLzOW3pzveS5B3Nd.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLfOW3pzveS5B3Nd.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLbOW3pzveS5B3Nd.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Bitter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/bitter/v25/raxhHiqOu8IVPmnRc6SY1KXhnF_Y8cTfOLjOW3pzveS5Bw.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next" data-reactroot=""><div class="styles_layout__uw121"><main class="styles_main__ZTqbU"><div class="styles_article__gKJAH"><article><a href="/">← Quay về trang chủ</a><div class="styles_htmlBody__Y9rnw"><h1>Tìm hiểu về Jestjs, viết unit test cho javascript</h1>
<p>Jestjs là một JavaScript Testing Framework khá là dễ sử dụng và cài đặt, tuy nhiên vẫn đầy đủ tính năng để bạn có thể sử dụng :clap:
Bài viết này mình xin giới thiệu một số tính năng cơ bản của jest cùng với một số ví dụ.</p>
<h2>Cài đặt</h2>
<p>Cài đặt Jest khá đơn giản:</p>
<pre><code class="hljs language-bash">yarn add --dev jest
</code></pre>
<p>hoặc</p>
<pre><code class="hljs language-bash">npm install --save-dev jest
</code></pre>
<p>Sau đó thêm đoạn code sau vào file package.json:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"jest"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Tiếp theo mình có ví dụ một file test: <code>math.js</code></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title hljs-function">sum</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-keyword">const</span> <span class="hljs-title hljs-class">MathJS</span> = {
  sum,
};

<span class="hljs-variable hljs-language">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title hljs-class">MathJS</span>;
</code></pre>
<p>Để viết test cho file trên mình tạo file <code>test/math.test.js</code>, đuôi file là test.js sẽ nói cho jest biết đây là file test của bạn.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> <span class="hljs-title hljs-class">MathJS</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../math"</span>);

<span class="hljs-title hljs-function">it</span>(<span class="hljs-string">"Adds 1 + 1 to equals 2"</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-title hljs-function">expect</span>(<span class="hljs-title hljs-class">MathJS</span>.<span class="hljs-title hljs-function">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)).<span class="hljs-title hljs-function">toBe</span>(<span class="hljs-number">2</span>);
});
</code></pre>
<p>Sau đó chạy <code>yarn test</code> hoặc <code>npm run test</code>.</p>
<p><img src="https://images.viblo.asia/9692954e-c671-4dcd-b028-dc188e860bea.png" alt="Kết quả"></p>
<h1>Các Matchers trong Jest</h1>
<p>Ở trong đoạn code trên:</p>
<pre><code class="hljs language-js"><span class="hljs-title hljs-function">expect</span>(<span class="hljs-title hljs-class">MathJS</span>.<span class="hljs-title hljs-function">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)).<span class="hljs-title hljs-function">toBe</span>(<span class="hljs-number">2</span>);
</code></pre>
<p><code>.toBe()</code> chính là một matcher trong jest. Nó giống như phép so sánh bằng bình thường vậy. Ví dụ:</p>
<pre><code class="hljs language-js"><span class="hljs-title hljs-function">expect</span>(result).<span class="hljs-title hljs-function">toBe</span>(<span class="hljs-number">2</span>);
<span class="hljs-title hljs-function">expect</span>(result).<span class="hljs-title hljs-function">toBe</span>(<span class="hljs-literal">true</span>);
<span class="hljs-title hljs-function">expect</span>(result).<span class="hljs-title hljs-function">toBe</span>({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> });
</code></pre>
<p>Tuy nhiên khi so sánh một Object bạn nên sử dụng <code>.toEqual()</code>
Lý do là vì <code>.toBe</code> thực tế sử dụng <code>===</code> để so sánh và đưa ra kết quả. Và chúng ta đều biết trong javascript:</p>
<pre><code class="hljs language-js">a = {};
b = {};
a === b;
=> <span class="hljs-literal">false</span>
</code></pre>
<p>Còn <code>.toEqual()</code> theo như Jest sẽ lần lượt kiểm tra tất các trường của Object, hoặc mảng để so sánh.
Vì vậy thay vì viết:</p>
<pre><code class="hljs language-js"><span class="hljs-title hljs-function">expect</span>(result).<span class="hljs-title hljs-function">toBe</span>({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> });
</code></pre>
<p>Hãy viết:</p>
<pre><code class="hljs language-js"><span class="hljs-title hljs-function">expect</span>(result).<span class="hljs-title hljs-function">toEqual</span>({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> });
</code></pre>
<p>Ngoài ra còn các matchers khác:</p>
<h3>Truthiness</h3>
<ul>
<li><code>toBeNull</code> so sánh với giá trị <code>null</code>.</li>
<li><code>toBeUndefined</code> so sánh với giá trị <code>undefined</code>.</li>
<li><code>toBeDefined</code> là hàm cho kết quả ngược lại <code>toBeUndefined</code>.</li>
<li><code>toBeTruthy</code> so sánh với giá trị true.</li>
<li><code>toBeFalsy</code> so sánh với giá trị false.</li>
</ul>
<h3>Numbers</h3>
<pre><code class="hljs language-js"><span class="hljs-title hljs-function">it</span>(<span class="hljs-string">"two plus two"</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-keyword">const</span> value = <span class="hljs-number">2</span> + <span class="hljs-number">2</span>;
  <span class="hljs-title hljs-function">expect</span>(value).<span class="hljs-title hljs-function">toBeGreaterThan</span>(<span class="hljs-number">3</span>);
  <span class="hljs-title hljs-function">expect</span>(value).<span class="hljs-title hljs-function">toBeGreaterThanOrEqual</span>(<span class="hljs-number">3.5</span>);
  <span class="hljs-title hljs-function">expect</span>(value).<span class="hljs-title hljs-function">toBeLessThan</span>(<span class="hljs-number">5</span>);
  <span class="hljs-title hljs-function">expect</span>(value).<span class="hljs-title hljs-function">toBeLessThanOrEqual</span>(<span class="hljs-number">4.5</span>);

  <span class="hljs-comment">// toBe and toEqual are equivalent for numbers</span>
  <span class="hljs-title hljs-function">expect</span>(value).<span class="hljs-title hljs-function">toBe</span>(<span class="hljs-number">4</span>);
  <span class="hljs-title hljs-function">expect</span>(value).<span class="hljs-title hljs-function">toEqual</span>(<span class="hljs-number">4</span>);
});
</code></pre>
<p>Đối với số thập phân, bạn nên sử dụng <code>toBeCloseTo</code>:</p>
<pre><code class="hljs language-js"><span class="hljs-title hljs-function">it</span>(<span class="hljs-string">"adding floating point numbers"</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-keyword">const</span> value = <span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>;
  <span class="hljs-comment">//expect(value).toBe(0.3);           This won't work because of rounding error</span>
  <span class="hljs-title hljs-function">expect</span>(value).<span class="hljs-title hljs-function">toBeCloseTo</span>(<span class="hljs-number">0.3</span>); <span class="hljs-comment">// This works.</span>
});
</code></pre>
<h3>String</h3>
<p>Bạn có thể kiểm tra một đoạn văn bản với regular expressions bằng <code>toMatch</code>:</p>
<pre><code class="hljs language-js"><span class="hljs-title hljs-function">it</span>(<span class="hljs-string">"there is no I in team"</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-title hljs-function">expect</span>(<span class="hljs-string">"team"</span>).<span class="hljs-property">not</span>.<span class="hljs-title hljs-function">toMatch</span>(<span class="hljs-regexp">/I/</span>);
});

<span class="hljs-title hljs-function">it</span>(<span class="hljs-string">'but there is a "stop" in Christoph'</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-title hljs-function">expect</span>(<span class="hljs-string">"Christoph"</span>).<span class="hljs-title hljs-function">toMatch</span>(<span class="hljs-regexp">/stop/</span>);
});
</code></pre>
<h3>Array</h3>
<p>Để kiểm tra giá trị có trong một mảng, bạn có thể dùng toContain:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1000</span>];
<span class="hljs-title hljs-function">it</span>(<span class="hljs-string">"array has 1000 on it"</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-title hljs-function">expect</span>(array).<span class="hljs-title hljs-function">toContain</span>(<span class="hljs-number">1000</span>);
});
</code></pre>
<h3>Exceptions</h3>
<p>Để kiểm tra một lỗi có thể xảy ra bạn có thể sử dụng <code>toThrow</code>:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title hljs-function">compileAndroidCode</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title hljs-class">ConfigError</span>(<span class="hljs-string">"you are using the wrong JDK"</span>);
}

<span class="hljs-title hljs-function">test</span>(<span class="hljs-string">"compiling android goes as expected"</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-title hljs-function">expect</span>(compileAndroidCode).<span class="hljs-title hljs-function">toThrow</span>();
  <span class="hljs-title hljs-function">expect</span>(compileAndroidCode).<span class="hljs-title hljs-function">toThrow</span>(<span class="hljs-title hljs-class">ConfigError</span>);

  <span class="hljs-comment">// You can also use the exact error message or a regexp</span>
  <span class="hljs-title hljs-function">expect</span>(compileAndroidCode).<span class="hljs-title hljs-function">toThrow</span>(<span class="hljs-string">"you are using the wrong JDK"</span>);
  <span class="hljs-title hljs-function">expect</span>(compileAndroidCode).<span class="hljs-title hljs-function">toThrow</span>(<span class="hljs-regexp">/JDK/</span>);
});
</code></pre>
<h1>Một số ví dụ</h1>
<h2>Test một action trong redux</h2>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> <span class="hljs-variable hljs-constant">CHANGE_EMAIL</span> = <span class="hljs-string">"CHANGE_EMAIL"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title hljs-function">changeEmail</span>(<span class="hljs-params">email</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-variable hljs-constant">CHANGE_EMAIL</span>,
    email,
  };
}

<span class="hljs-title hljs-function">it</span>(<span class="hljs-string">"should render type and email of change email action"</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-keyword">const</span> email = <span class="hljs-string">"test@tt.com"</span>;
  <span class="hljs-keyword">const</span> expected = {
    <span class="hljs-attr">type</span>: <span class="hljs-variable hljs-constant">CHANGE_EMAIL</span>,
    email,
  };

  <span class="hljs-title hljs-function">expect</span>(<span class="hljs-title hljs-function">changeEmail</span>(email)).<span class="hljs-title hljs-function">toEqual</span>(expected);
});
</code></pre>
<h2>Test một event trong Jquery</h2>
<pre><code class="hljs language-js"><span class="hljs-title hljs-function">it</span>(<span class="hljs-string">"should fire a alert"</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-keyword">const</span> alert = jest.<span class="hljs-title hljs-function">fn</span>();

  <span class="hljs-variable hljs-language">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> =
    <span class="hljs-string">"&#x3C;div>"</span> +
    <span class="hljs-string">'  &#x3C;span id="username" />'</span> +
    <span class="hljs-string">'  &#x3C;button id="button" />'</span> +
    <span class="hljs-string">"&#x3C;/div>"</span>;

  $(<span class="hljs-string">"#button"</span>).<span class="hljs-title hljs-function">click</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-title hljs-function">alert</span>(<span class="hljs-string">"click"</span>);
  });

  $(<span class="hljs-string">"#button"</span>).<span class="hljs-title hljs-function">click</span>();
  <span class="hljs-title hljs-function">expect</span>(alert).<span class="hljs-title hljs-function">toBeCalled</span>();

  <span class="hljs-comment">// the mock function is called one time</span>
  <span class="hljs-title hljs-function">expect</span>(alert.<span class="hljs-property">mock</span>.<span class="hljs-property">calls</span>.<span class="hljs-property">length</span>).<span class="hljs-title hljs-function">toBe</span>(<span class="hljs-number">1</span>);

  <span class="hljs-comment">// The first argument of the first call to the function was click</span>
  <span class="hljs-title hljs-function">expect</span>(alert.<span class="hljs-property">mock</span>.<span class="hljs-property">calls</span>[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]).<span class="hljs-title hljs-function">toBe</span>(<span class="hljs-string">"click"</span>);
});
</code></pre>
<p>Bạn có thể thấy <code>const alert = jest.fn();</code>. Đây là một tính năng trong Jest giúp bạn mock một function. Hay mô phỏng lại hàm cần test.</p>
<h2>Test với module axios</h2>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">"axios"</span>);

jest.<span class="hljs-title hljs-function">mock</span>(<span class="hljs-string">"axios"</span>, <span class="hljs-function">() =></span> ({
  <span class="hljs-attr">get</span>: jest.<span class="hljs-title hljs-function">fn</span>().<span class="hljs-title hljs-function">mockResolvedValue</span>({ <span class="hljs-attr">data</span>: { <span class="hljs-attr">message</span>: <span class="hljs-string">"hello"</span> } }),
}));

<span class="hljs-title hljs-function">test</span>(<span class="hljs-string">"mock axios.get"</span>, <span class="hljs-keyword">async</span> () => {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title hljs-function">get</span>(<span class="hljs-string">"https://test.com/t/1"</span>);
  <span class="hljs-title hljs-function">expect</span>(response.<span class="hljs-property">data</span>).<span class="hljs-title hljs-function">toEqual</span>({ <span class="hljs-attr">foo</span>: <span class="hljs-string">"bar"</span> });
});
</code></pre>
<p>Trong ví dụ này mình đã mock module axios, và đặt giá trị trả về cho hàm get. Như vậy khi test bạn sẽ không cần phải gửi request thật, tránh mất thời gian. Các module khác bạn cũng có thể làm cách tương tự.</p></div></article><footer class="styles_footer__UG76L">© hungkieu 2022</footer></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"jest-react","title":"Tìm hiểu về Jestjs, viết unit test cho javascript","date":"2019-08-22","description":"Jestjs là một JavaScript Testing Framework khá là dễ sử dụng và cài đặt, tuy nhiên vẫn đầy đủ tính năng để bạn có thể sử dụng. Bài viết này mình xin giới thiệu một số tính năng cơ bản của jest cùng với một số ví dụ.","tags":["Reactjs"],"content":"\u003ch1\u003eTìm hiểu về Jestjs, viết unit test cho javascript\u003c/h1\u003e\n\u003cp\u003eJestjs là một JavaScript Testing Framework khá là dễ sử dụng và cài đặt, tuy nhiên vẫn đầy đủ tính năng để bạn có thể sử dụng :clap:\nBài viết này mình xin giới thiệu một số tính năng cơ bản của jest cùng với một số ví dụ.\u003c/p\u003e\n\u003ch2\u003eCài đặt\u003c/h2\u003e\n\u003cp\u003eCài đặt Jest khá đơn giản:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eyarn add --dev jest\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ehoặc\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm install --save-dev jest\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSau đó thêm đoạn code sau vào file package.json:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"scripts\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"test\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"jest\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTiếp theo mình có ví dụ một file test: \u003ccode\u003emath.js\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title hljs-function\"\u003esum\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ea, b\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e a + b;\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title hljs-class\"\u003eMathJS\u003c/span\u003e = {\n  sum,\n};\n\n\u003cspan class=\"hljs-variable hljs-language\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = \u003cspan class=\"hljs-title hljs-class\"\u003eMathJS\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eĐể viết test cho file trên mình tạo file \u003ccode\u003etest/math.test.js\u003c/code\u003e, đuôi file là test.js sẽ nói cho jest biết đây là file test của bạn.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title hljs-class\"\u003eMathJS\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"../math\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-title hljs-function\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Adds 1 + 1 to equals 2\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title hljs-class\"\u003eMathJS\u003c/span\u003e.\u003cspan class=\"hljs-title hljs-function\"\u003esum\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)).\u003cspan class=\"hljs-title hljs-function\"\u003etoBe\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSau đó chạy \u003ccode\u003eyarn test\u003c/code\u003e hoặc \u003ccode\u003enpm run test\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://images.viblo.asia/9692954e-c671-4dcd-b028-dc188e860bea.png\" alt=\"Kết quả\"\u003e\u003c/p\u003e\n\u003ch1\u003eCác Matchers trong Jest\u003c/h1\u003e\n\u003cp\u003eỞ trong đoạn code trên:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title hljs-class\"\u003eMathJS\u003c/span\u003e.\u003cspan class=\"hljs-title hljs-function\"\u003esum\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)).\u003cspan class=\"hljs-title hljs-function\"\u003etoBe\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e.toBe()\u003c/code\u003e chính là một matcher trong jest. Nó giống như phép so sánh bằng bình thường vậy. Ví dụ:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(result).\u003cspan class=\"hljs-title hljs-function\"\u003etoBe\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e);\n\u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(result).\u003cspan class=\"hljs-title hljs-function\"\u003etoBe\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n\u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(result).\u003cspan class=\"hljs-title hljs-function\"\u003etoBe\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ea\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eb\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTuy nhiên khi so sánh một Object bạn nên sử dụng \u003ccode\u003e.toEqual()\u003c/code\u003e\nLý do là vì \u003ccode\u003e.toBe\u003c/code\u003e thực tế sử dụng \u003ccode\u003e===\u003c/code\u003e để so sánh và đưa ra kết quả. Và chúng ta đều biết trong javascript:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ea = {};\nb = {};\na === b;\n=\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCòn \u003ccode\u003e.toEqual()\u003c/code\u003e theo như Jest sẽ lần lượt kiểm tra tất các trường của Object, hoặc mảng để so sánh.\nVì vậy thay vì viết:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(result).\u003cspan class=\"hljs-title hljs-function\"\u003etoBe\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ea\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eb\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHãy viết:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(result).\u003cspan class=\"hljs-title hljs-function\"\u003etoEqual\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ea\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eb\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNgoài ra còn các matchers khác:\u003c/p\u003e\n\u003ch3\u003eTruthiness\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etoBeNull\u003c/code\u003e so sánh với giá trị \u003ccode\u003enull\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etoBeUndefined\u003c/code\u003e so sánh với giá trị \u003ccode\u003eundefined\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etoBeDefined\u003c/code\u003e là hàm cho kết quả ngược lại \u003ccode\u003etoBeUndefined\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etoBeTruthy\u003c/code\u003e so sánh với giá trị true.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etoBeFalsy\u003c/code\u003e so sánh với giá trị false.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eNumbers\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title hljs-function\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"two plus two\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e value = \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e + \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(value).\u003cspan class=\"hljs-title hljs-function\"\u003etoBeGreaterThan\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e);\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(value).\u003cspan class=\"hljs-title hljs-function\"\u003etoBeGreaterThanOrEqual\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3.5\u003c/span\u003e);\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(value).\u003cspan class=\"hljs-title hljs-function\"\u003etoBeLessThan\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e);\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(value).\u003cspan class=\"hljs-title hljs-function\"\u003etoBeLessThanOrEqual\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e4.5\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// toBe and toEqual are equivalent for numbers\u003c/span\u003e\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(value).\u003cspan class=\"hljs-title hljs-function\"\u003etoBe\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e);\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(value).\u003cspan class=\"hljs-title hljs-function\"\u003etoEqual\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eĐối với số thập phân, bạn nên sử dụng \u003ccode\u003etoBeCloseTo\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title hljs-function\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"adding floating point numbers\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e value = \u003cspan class=\"hljs-number\"\u003e0.1\u003c/span\u003e + \u003cspan class=\"hljs-number\"\u003e0.2\u003c/span\u003e;\n  \u003cspan class=\"hljs-comment\"\u003e//expect(value).toBe(0.3);           This won't work because of rounding error\u003c/span\u003e\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(value).\u003cspan class=\"hljs-title hljs-function\"\u003etoBeCloseTo\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0.3\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// This works.\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eString\u003c/h3\u003e\n\u003cp\u003eBạn có thể kiểm tra một đoạn văn bản với regular expressions bằng \u003ccode\u003etoMatch\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title hljs-function\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"there is no I in team\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"team\"\u003c/span\u003e).\u003cspan class=\"hljs-property\"\u003enot\u003c/span\u003e.\u003cspan class=\"hljs-title hljs-function\"\u003etoMatch\u003c/span\u003e(\u003cspan class=\"hljs-regexp\"\u003e/I/\u003c/span\u003e);\n});\n\n\u003cspan class=\"hljs-title hljs-function\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'but there is a \"stop\" in Christoph'\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Christoph\"\u003c/span\u003e).\u003cspan class=\"hljs-title hljs-function\"\u003etoMatch\u003c/span\u003e(\u003cspan class=\"hljs-regexp\"\u003e/stop/\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eArray\u003c/h3\u003e\n\u003cp\u003eĐể kiểm tra giá trị có trong một mảng, bạn có thể dùng toContain:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e array = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e];\n\u003cspan class=\"hljs-title hljs-function\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"array has 1000 on it\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(array).\u003cspan class=\"hljs-title hljs-function\"\u003etoContain\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eExceptions\u003c/h3\u003e\n\u003cp\u003eĐể kiểm tra một lỗi có thể xảy ra bạn có thể sử dụng \u003ccode\u003etoThrow\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title hljs-function\"\u003ecompileAndroidCode\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title hljs-class\"\u003eConfigError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"you are using the wrong JDK\"\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-title hljs-function\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"compiling android goes as expected\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(compileAndroidCode).\u003cspan class=\"hljs-title hljs-function\"\u003etoThrow\u003c/span\u003e();\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(compileAndroidCode).\u003cspan class=\"hljs-title hljs-function\"\u003etoThrow\u003c/span\u003e(\u003cspan class=\"hljs-title hljs-class\"\u003eConfigError\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// You can also use the exact error message or a regexp\u003c/span\u003e\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(compileAndroidCode).\u003cspan class=\"hljs-title hljs-function\"\u003etoThrow\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"you are using the wrong JDK\"\u003c/span\u003e);\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(compileAndroidCode).\u003cspan class=\"hljs-title hljs-function\"\u003etoThrow\u003c/span\u003e(\u003cspan class=\"hljs-regexp\"\u003e/JDK/\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eMột số ví dụ\u003c/h1\u003e\n\u003ch2\u003eTest một action trong redux\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable hljs-constant\"\u003eCHANGE_EMAIL\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"CHANGE_EMAIL\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title hljs-function\"\u003echangeEmail\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eemail\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-variable hljs-constant\"\u003eCHANGE_EMAIL\u003c/span\u003e,\n    email,\n  };\n}\n\n\u003cspan class=\"hljs-title hljs-function\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"should render type and email of change email action\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e email = \u003cspan class=\"hljs-string\"\u003e\"test@tt.com\"\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e expected = {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-variable hljs-constant\"\u003eCHANGE_EMAIL\u003c/span\u003e,\n    email,\n  };\n\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title hljs-function\"\u003echangeEmail\u003c/span\u003e(email)).\u003cspan class=\"hljs-title hljs-function\"\u003etoEqual\u003c/span\u003e(expected);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eTest một event trong Jquery\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title hljs-function\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"should fire a alert\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e alert = jest.\u003cspan class=\"hljs-title hljs-function\"\u003efn\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-variable hljs-language\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003einnerHTML\u003c/span\u003e =\n    \u003cspan class=\"hljs-string\"\u003e\"\u0026#x3C;div\u003e\"\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e'  \u0026#x3C;span id=\"username\" /\u003e'\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e'  \u0026#x3C;button id=\"button\" /\u003e'\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\"\u0026#x3C;/div\u003e\"\u003c/span\u003e;\n\n  $(\u003cspan class=\"hljs-string\"\u003e\"#button\"\u003c/span\u003e).\u003cspan class=\"hljs-title hljs-function\"\u003eclick\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-title hljs-function\"\u003ealert\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"click\"\u003c/span\u003e);\n  });\n\n  $(\u003cspan class=\"hljs-string\"\u003e\"#button\"\u003c/span\u003e).\u003cspan class=\"hljs-title hljs-function\"\u003eclick\u003c/span\u003e();\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(alert).\u003cspan class=\"hljs-title hljs-function\"\u003etoBeCalled\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-comment\"\u003e// the mock function is called one time\u003c/span\u003e\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(alert.\u003cspan class=\"hljs-property\"\u003emock\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecalls\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e).\u003cspan class=\"hljs-title hljs-function\"\u003etoBe\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// The first argument of the first call to the function was click\u003c/span\u003e\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(alert.\u003cspan class=\"hljs-property\"\u003emock\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecalls\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e][\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]).\u003cspan class=\"hljs-title hljs-function\"\u003etoBe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"click\"\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBạn có thể thấy \u003ccode\u003econst alert = jest.fn();\u003c/code\u003e. Đây là một tính năng trong Jest giúp bạn mock một function. Hay mô phỏng lại hàm cần test.\u003c/p\u003e\n\u003ch2\u003eTest với module axios\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e axios = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"axios\"\u003c/span\u003e);\n\njest.\u003cspan class=\"hljs-title hljs-function\"\u003emock\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"axios\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e ({\n  \u003cspan class=\"hljs-attr\"\u003eget\u003c/span\u003e: jest.\u003cspan class=\"hljs-title hljs-function\"\u003efn\u003c/span\u003e().\u003cspan class=\"hljs-title hljs-function\"\u003emockResolvedValue\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"hello\"\u003c/span\u003e } }),\n}));\n\n\u003cspan class=\"hljs-title hljs-function\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"mock axios.get\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e () =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e axios.\u003cspan class=\"hljs-title hljs-function\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"https://test.com/t/1\"\u003c/span\u003e);\n  \u003cspan class=\"hljs-title hljs-function\"\u003eexpect\u003c/span\u003e(response.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e).\u003cspan class=\"hljs-title hljs-function\"\u003etoEqual\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003efoo\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"bar\"\u003c/span\u003e });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTrong ví dụ này mình đã mock module axios, và đặt giá trị trả về cho hàm get. Như vậy khi test bạn sẽ không cần phải gửi request thật, tránh mất thời gian. Các module khác bạn cũng có thể làm cách tương tự.\u003c/p\u003e"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"jest-react"},"buildId":"Ks3kXhdQTwMZQ3etT1ZT5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>